---
import { formatDate } from "../../lib/helpers";
import Card from "../Card/index.astro";

interface Props {
  title?: string;
  date?: Date;
  url: string;
  image?: string;
  description?: string;
}

const { title, date, url, image, description } = Astro.props;
const safeDate = date ?? new Date(0);

// Depuraci√≥n
console.log('WorkRow received props:', { 
  title, 
  image, 
  url,
  hasImage: !!image,
  imagePath: image ? new URL(image, Astro.url.origin).toString() : 'no image'
});
---

<li class="w-full text-neutral-100 hover:text-neutral-400 ease-in-out transition-colors my-4">
  <Card>
    <a class="block decoration-none" href={`/artwork/${url}`}>
      <div class="flex flex-col gap-2">
        <h3 class="font-bold m-0 pt-0 mb-0">{title}</h3>
        {description && (
          <p class="text-sm text-neutral-400 line-clamp-2 mb-2">
            {description}
          </p>
        )}
        
        {image && (
          <img 
            src={image}
            alt={title || 'Artwork image'}
            class="w-full h-auto max-h-[300px] select-none md:w-auto md:max-h-[300px] md:relative md:opacity-100 pointer-events-none"
          />
        )}
        
        <time
          class="text-right tabular-nums text-sm text-neutral-400"
          datetime={safeDate.toISOString()} 
          data-date={safeDate.toISOString()}
        >
          {formatDate(safeDate)}
        </time>
      </div>
    </a>
  </Card>
</li>
